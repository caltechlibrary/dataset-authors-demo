{{- define "results.tmpl" -}}
<section class="search-results">
{{- range $hit := .hits }}
    {{- with $hit.fields -}}
    <div class="search-result">
        {{ with .title -}}<div><span class="field-name">Title</span> <span class="field-value">{{- . -}}</span></div>{{- end }}
<!-- START: Author List -->
        <div>
        {{- if (gt (len .authors_family) 0) -}}
        <span class="field-name">Author(s)</span>
        <ul class="author-names">
        {{- $author_ids := .authors_id -}}
        {{- $given_names := .authors_given -}}
        {{- $orcids := .orcid -}}
        {{- range $i, $last_name := .authors_family -}}
            {{- $orcid := (index $orcids $i) -}}
            <li><a href="http://authors.library.caltech.edu/view/person-az/{{- (index $author_ids $i) -}}.html">{{- $last_name -}}</a>, {{ (index $given_names $i) }} {{if $orcid }}(orcid: <a href="https://orcid.org/{{- $orcid -}}">{{- $orcid -}}</a>){{ end }}</li>
        {{- end -}}
        </ul><!-- END ul.author-names -->
        {{- end -}}
        </div>
<!--  END: Author List -->
        {{ if (eq .date_type "published") }}<div><span class="field-name">{{ .date_type }}</span> <span class="field-value">{{ .date }}</span>{{- end -}}</div>
        {{ with .citation -}}<div><span class="field-name">Citation</span> <span class="field-value">{{- (markdown .) -}}</span></div>{{- end }}

        {{ with .abstract -}}<div><span class="field-name">Abstract</span> <span class="field-value">{{- (markdown .) -}}</span></div>{{- end }}

        {{ with .keywords -}}<div><span class="field-name">Keywords</span> <span class="field-value">{{- . -}}</span></div>{{- end }}
        {{ with .rights -}}<div><span class="field-name">Rights</span> <span class="field-value">{{- . -}}</span></div>{{- end }}

        {{- range $key, $values := .fragments -}}
        <div><span class="matched-name">Matched on {{ $key -}}</span> <span class="matched-value">{{- (join $values "<br />") -}}</span></div>
        {{- end -}}
        {{ with .index }}
        <div><span class="index-name">from index</span> <span class="index-value">{{- (basename . ".bleve") -}}</span></div>
        {{- end }}
    {{- end -}}
    </div><!-- END search-result -->
{{ end }}
</section><!-- END: search-results -->
{{- end -}}
